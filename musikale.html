<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jingle Personalizado - Gerador de M√∫sica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4F46E5;
            --primary-dark: #4338CA;
            --secondary: #10B981;
            --light: #F9FAFB;
            --dark: #1F2937;
            --gray: #6B7280;
            --light-gray: #E5E7EB;
            --border-radius: 12px;
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7ff 0%, #f0f4ff 100%);
            color: var(--dark);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
        }

        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 40px;
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        h1 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 30px;
            line-height: 1.6;
        }

        .progress-container {
            margin-bottom: 40px;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--light-gray);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 12.5%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            font-size: 0.9rem;
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .question-text {
            font-family: 'Poppins', sans-serif;
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            padding: 18px 20px;
            border: 2px solid var(--light-gray);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            font-weight: 500;
        }

        .option:hover {
            border-color: var(--primary);
            background-color: rgba(79, 70, 229, 0.03);
        }

        .option.selected {
            border-color: var(--primary);
            background-color: rgba(79, 70, 229, 0.08);
        }

        .option-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(79, 70, 229, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            color: var(--primary);
            font-weight: 600;
        }

        .btn {
            display: inline-block;
            padding: 16px 32px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.2);
        }

        .btn:disabled {
            background-color: var(--light-gray);
            color: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background-color: rgba(79, 70, 229, 0.05);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .hidden {
            display: none;
        }

        .name-input-container {
            margin-top: 20px;
        }

        .input-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--dark);
        }

        .name-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--light-gray);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .name-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .loading-container {
            text-align: center;
            padding: 40px 20px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(79, 70, 229, 0.1);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 25px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result-container {
            text-align: center;
        }

        .music-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .music-player {
            margin: 30px 0;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .download-section {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .info-message {
            background-color: rgba(16, 185, 129, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 16px;
            border-radius: 4px;
            margin: 20px 0;
            text-align: left;
        }

        .error-message {
            background-color: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #EF4444;
            padding: 16px;
            border-radius: 4px;
            margin: 20px 0;
            text-align: left;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .step {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--light-gray);
            margin: 0 5px;
        }

        .step.active {
            background-color: var(--primary);
        }

        @media (max-width: 768px) {
            .card {
                padding: 25px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card" id="intro-card">
            <div class="header">
                <div class="logo">
                    <i class="fas fa-music"></i>
                </div>
                <h1>Crie Seu Jingle Personalizado</h1>
                <p class="subtitle">
                    Responda 8 perguntas r√°pidas sobre seu estilo e personalidade, e nosso sistema criar√° um jingle engra√ßado e caricato especialmente para voc√™ usando intelig√™ncia artificial.
                </p>
                <button class="btn" id="start-btn">Come√ßar Quiz</button>
            </div>
        </div>

        <div class="card hidden" id="quiz-card">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span>Progresso</span>
                    <span id="progress-percentage">12.5%</span>
                </div>
            </div>

            <div id="question-1" class="question-container">
                <div class="question-number">Pergunta 1 de 8</div>
                <h2 class="question-text">Como voc√™ descreveria sua energia no dia a dia?</h2>
                <div class="options-container">
                    <div class="option" data-value="explosiva">
                        <div class="option-icon">‚ö°</div>
                        <div>Explosiva - Sempre acelerado e cheio de g√°s!</div>
                    </div>
                    <div class="option" data-value="calma">
                        <div class="option-icon">üåä</div>
                        <div>Calma - Relaxado, sem pressa, na minha vibe</div>
                    </div>
                    <div class="option" data-value="impulsiva">
                        <div class="option-icon">üé¢</div>
                        <div>Impulsiva - Altos e baixos, depende do dia</div>
                    </div>
                    <div class="option" data-value="equilibrada">
                        <div class="option-icon">‚öñÔ∏è</div>
                        <div>Equilibrada - Nem muita, nem pouca, no ponto</div>
                    </div>
                </div>
            </div>

            <div id="question-2" class="question-container hidden">
                <div class="question-number">Pergunta 2 de 8</div>
                <h2 class="question-text">Qual estilo musical mais combina com voc√™?</h2>
                <div class="options-container">
                    <div class="option" data-value="pop">
                        <div class="option-icon">üé§</div>
                        <div>Pop - Alegre, cativante e cheio de melodia</div>
                    </div>
                    <div class="option" data-value="rock">
                        <div class="option-icon">üé∏</div>
                        <div>Rock - Atitude, guitarra e muita energia</div>
                    </div>
                    <div class="option" data-value="funk">
                        <div class="option-icon">üéß</div>
                        <div>Funk - Batida forte, dan√ßante e descontra√≠do</div>
                    </div>
                    <div class="option" data-value="sertanejo">
                        <div class="option-icon">üéµ</div>
                        <div>Sertanejo - Emocional, tradicional e brasileiro</div>
                    </div>
                </div>
            </div>

            <div id="question-3" class="question-container hidden">
                <div class="question-number">Pergunta 3 de 8</div>
                <h2 class="question-text">Como voc√™ reage a situa√ß√µes inesperadas?</h2>
                <div class="options-container">
                    <div class="option" data-value="improvisa">
                        <div class="option-icon">üé≠</div>
                        <div>Improviso - Giro a situa√ß√£o a meu favor</div>
                    </div>
                    <div class="option" data-value="planeja">
                        <div class="option-icon">üìã</div>
                        <div>Planejo - Penso antes de agir, mantenho o controle</div>
                    </div>
                    <div class="option" data-value="ri">
                        <div class="option-icon">üòÇ</div>
                        <div>Dou risada - Levo na brincadeira, n√£o levo a s√©rio</div>
                    </div>
                    <div class="option" data-value="estressa">
                        <div class="option-icon">üòÖ</div>
                        <div>Fico estressado - Preciso de um momento para processar</div>
                    </div>
                </div>
            </div>

            <div id="question-4" class="question-container hidden">
                <div class="question-number">Pergunta 4 de 8</div>
                <h2 class="question-text">Qual animal melhor representa sua personalidade?</h2>
                <div class="options-container">
                    <div class="option" data-value="leao">
                        <div class="option-icon">ü¶Å</div>
                        <div>Le√£o - Lideran√ßa, coragem e impon√™ncia</div>
                    </div>
                    <div class="option" data-value="golfinho">
                        <div class="option-icon">üê¨</div>
                        <div>Golfinho - Inteligente, brincalh√£o e social</div>
                    </div>
                    <div class="option" data-value="coruja">
                        <div class="option-icon">ü¶â</div>
                        <div>Coruja - S√°bio, observador e tranquilo</div>
                    </div>
                    <div class="option" data-value="macaco">
                        <div class="option-icon">üêµ</div>
                        <div>Macaco - Travesso, √°gil e cheio de energia</div>
                    </div>
                </div>
            </div>

            <div id="question-5" class="question-container hidden">
                <div class="question-number">Pergunta 5 de 8</div>
                <h2 class="question-text">Em uma festa, voc√™ √© mais...</h2>
                <div class="options-container">
                    <div class="option" data-value="dancarino">
                        <div class="option-icon">üíÉ</div>
                        <div>Dan√ßarino - No centro da pista, comandando a festa</div>
                    </div>
                    <div class="option" data-value="conversador">
                        <div class="option-icon">üó£Ô∏è</div>
                        <div>Conversador - Nas laterais, socializando com todos</div>
                    </div>
                    <div class="option" data-value="observador">
                        <div class="option-icon">üëÄ</div>
                        <div>Observador - Analisando a cena de um canto</div>
                    </div>
                    <div class="option" data-value="animador">
                        <div class="option-icon">üéâ</div>
                        <div>Animador - Criando brincadeiras e jogos</div>
                    </div>
                </div>
            </div>

            <div id="question-6" class="question-container hidden">
                <div class="question-number">Pergunta 6 de 8</div>
                <h2 class="question-text">Qual superpoder voc√™ gostaria de ter?</h2>
                <div class="options-container">
                    <div class="option" data-value="velocidade">
                        <div class="option-icon">‚ö°</div>
                        <div>Super Velocidade - Fazer tudo rapidamente</div>
                    </div>
                    <div class="option" data-value="leitura">
                        <div class="option-icon">üìñ</div>
                        <div>Leitura de Mentes - Saber o que os outros pensam</div>
                    </div>
                    <div class="option" data-value="invisibilidade">
                        <div class="option-icon">üëª</div>
                        <div>Invisibilidade - Passar despercebido quando quiser</div>
                    </div>
                    <div class="option" data-value="voar">
                        <div class="option-icon">ü¶∏</div>
                        <div>Voar - Liberdade para ir a qualquer lugar</div>
                    </div>
                </div>
            </div>

            <div id="question-7" class="question-container hidden">
                <div class="question-number">Pergunta 7 de 8</div>
                <h2 class="question-text">Qual √© seu estilo de humor?</h2>
                <div class="options-container">
                    <div class="option" data-value="sarcastico">
                        <div class="option-icon">üòè</div>
                        <div>Sarc√°stico - Ironia fina e coment√°rios √°cidos</div>
                    </div>
                    <div class="option" data-value="palhaco">
                        <div class="option-icon">ü§°</div>
                        <div>Palha√ßo - Piadas bobas e situa√ß√µes engra√ßadas</div>
                    </div>
                    <div class="option" data-value="absurdo">
                        <div class="option-icon">ü§™</div>
                        <div>Absurdo - Humor nonsense e situa√ß√µes surreais</div>
                    </div>
                    <div class="option" data-value="timido">
                        <div class="option-icon">üòä</div>
                        <div>T√≠mido - Risadinhas discretas e humor leve</div>
                    </div>
                </div>
            </div>

            <div id="question-8" class="question-container hidden">
                <div class="question-number">Pergunta 8 de 8</div>
                <h2 class="question-text">Como voc√™ enfrenta desafios?</h2>
                <div class="options-container">
                    <div class="option" data-value="coragem">
                        <div class="option-icon">ü¶∏</div>
                        <div>Com coragem - Enfrento de frente, sem medo</div>
                    </div>
                    <div class="option" data-value="estrategia">
                        <div class="option-icon">‚ôüÔ∏è</div>
                        <div>Com estrat√©gia - Planejo cada movimento</div>
                    </div>
                    <div class="option" data-value="criatividade">
                        <div class="option-icon">üé®</div>
                        <div>Com criatividade - Encontro solu√ß√µes inovadoras</div>
                    </div>
                    <div class="option" data-value="humor">
                        <div class="option-icon">üòÑ</div>
                        <div>Com humor - Levo na brincadeira, descontraio</div>
                    </div>
                </div>
            </div>

            <div id="name-input" class="hidden name-input-container">
                <div class="question-number">√öltimo Passo</div>
                <h2 class="question-text">Qual √© o seu nome?</h2>
                <div class="info-message">
                    Seu nome ser√° inclu√≠do no jingle de forma engra√ßada e caricata. Pode ser seu nome real ou um apelido divertido!
                </div>
                <label class="input-label" for="user-name">Digite seu nome:</label>
                <input type="text" id="user-name" class="name-input" placeholder="Ex: Jo√£o, Maria, Z√©, Ana..." maxlength="50">
                <div class="error-message hidden" id="name-error">Por favor, digite seu nome para continuar.</div>
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" id="prev-btn">Anterior</button>
                <button class="btn" id="next-btn">Pr√≥xima Pergunta</button>
            </div>

            <div class="step-indicator">
                <div class="step active" data-step="1"></div>
                <div class="step" data-step="2"></div>
                <div class="step" data-step="3"></div>
                <div class="step" data-step="4"></div>
                <div class="step" data-step="5"></div>
                <div class="step" data-step="6"></div>
                <div class="step" data-step="7"></div>
                <div class="step" data-step="8"></div>
                <div class="step" data-step="9"></div>
            </div>
        </div>

        <div class="card hidden" id="loading-card">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <h2 class="question-text">Criando seu jingle personalizado...</h2>
                <p class="subtitle">Isso pode levar de 30 segundos a 3 minutos. Estamos combinando suas respostas com intelig√™ncia artificial para criar uma m√∫sica engra√ßada e √∫nica para voc√™!</p>
                <div class="info-message">
                    <strong>Informa√ß√£o:</strong> Estamos usando a API do Suno AI para gerar sua m√∫sica. O processo inclui cria√ß√£o de letras, composi√ß√£o musical e produ√ß√£o de √°udio.
                </div>
            </div>
        </div>

        <div class="card hidden" id="result-card">
            <div class="result-container">
                <div class="logo">
                    <i class="fas fa-music"></i>
                </div>
                <h1>Seu Jingle Est√° Pronto!</h1>
                <p class="subtitle">
                    Baseado nas suas respostas, criamos um jingle caricato e divertido especialmente para voc√™.
                </p>
                
                <div id="result-content">
                    <h3 class="music-title" id="generated-title">Jingle para [Nome]</h3>
                    
                    <div class="info-message">
                        <strong>Detalhes da cria√ß√£o:</strong> 
                        <div id="music-details">Estilo: Pop ‚Ä¢ Energia: Alta ‚Ä¢ Dura√ß√£o: 2 minutos</div>
                    </div>
                    
                    <div class="music-player" id="music-player">
                        <!-- Player ser√° inserido aqui dinamicamente -->
                        <p>Seu √°udio ser√° carregado aqui em breve...</p>
                    </div>
                    
                    <div class="download-section">
                        <a href="#" class="btn" id="download-btn" target="_blank">
                            <i class="fas fa-download"></i> Baixar MP3
                        </a>
                        <button class="btn btn-secondary" id="new-quiz-btn">
                            <i class="fas fa-redo"></i> Criar Novo Jingle
                        </button>
                    </div>
                    
                    <div class="info-message" id="api-info">
                        <strong>Nota t√©cnica:</strong> Esta aplica√ß√£o usa a API do Suno AI (modelo V4_5ALL) para gera√ß√£o de m√∫sica. As m√∫sicas s√£o mantidas nos servidores do Suno por 15 dias.
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Jingle Personalizado ‚Ä¢ Usa API do Suno AI ‚Ä¢ Criado para divers√£o e entretenimento</p>
            <p><small>As m√∫sicas geradas s√£o caricaturas engra√ßadas baseadas nas respostas fornecidas</small></p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos DOM
            const introCard = document.getElementById('intro-card');
            const quizCard = document.getElementById('quiz-card');
            const loadingCard = document.getElementById('loading-card');
            const resultCard = document.getElementById('result-card');
            const startBtn = document.getElementById('start-btn');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const progressFill = document.getElementById('progress-fill');
            const progressPercentage = document.getElementById('progress-percentage');
            const userNameInput = document.getElementById('user-name');
            const nameError = document.getElementById('name-error');
            const nameInputSection = document.getElementById('name-input');
            const downloadBtn = document.getElementById('download-btn');
            const newQuizBtn = document.getElementById('new-quiz-btn');
            
            // Estado do quiz
            let currentQuestion = 1;
            let totalQuestions = 8;
            let userAnswers = {};
            let userName = '';
            let generatedTaskId = '';
            let generatedAudioUrl = '';
            let generatedDownloadUrl = '';
            
            // Configura√ß√£o da API (use a chave fornecida pelo usu√°rio)
            const API_KEY = '85496f40a8f28f52c5cdba0b1c293034';
            const API_URL = 'https://api.sunoapi.org/api/v1/generate';
            const API_STATUS_URL = 'https://api.sunoapi.org/api/v1/generate/';
            
            // Iniciar o quiz
            startBtn.addEventListener('click', function() {
                introCard.classList.add('hidden');
                quizCard.classList.remove('hidden');
                updateProgress();
                updateStepIndicator();
            });
            
            // Navega√ß√£o entre perguntas
            nextBtn.addEventListener('click', function() {
                if (currentQuestion === totalQuestions) {
                    // Mostrar entrada de nome na √∫ltima pergunta
                    showNameInput();
                } else if (currentQuestion === totalQuestions + 1) {
                    // Verificar se o nome foi fornecido
                    if (validateNameInput()) {
                        // Iniciar gera√ß√£o da m√∫sica
                        startMusicGeneration();
                    }
                } else {
                    // Ir para pr√≥xima pergunta
                    goToNextQuestion();
                }
            });
            
            prevBtn.addEventListener('click', function() {
                if (currentQuestion === totalQuestions + 1) {
                    // Voltar da entrada de nome para a √∫ltima pergunta
                    hideNameInput();
                } else if (currentQuestion > 1) {
                    // Voltar para pergunta anterior
                    goToPreviousQuestion();
                }
            });
            
            // Selecionar op√ß√µes de resposta
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionId = this.closest('.question-container').id;
                    const questionNum = parseInt(questionId.split('-')[1]);
                    const selectedValue = this.getAttribute('data-value');
                    
                    // Remover sele√ß√£o anterior nesta pergunta
                    const options = this.parentElement.querySelectorAll('.option');
                    options.forEach(opt => opt.classList.remove('selected'));
                    
                    // Selecionar nova op√ß√£o
                    this.classList.add('selected');
                    
                    // Salvar resposta
                    userAnswers[`question${questionNum}`] = selectedValue;
                    
                    // Habilitar bot√£o pr√≥ximo
                    nextBtn.disabled = false;
                });
            });
            
            // Fun√ß√µes de navega√ß√£o
            function goToNextQuestion() {
                // Validar se resposta foi selecionada
                if (!userAnswers[`question${currentQuestion}`]) {
                    alert('Por favor, selecione uma resposta antes de continuar.');
                    return;
                }
                
                // Esconder pergunta atual
                document.getElementById(`question-${currentQuestion}`).classList.add('hidden');
                
                // Avan√ßar
                currentQuestion++;
                
                // Mostrar pr√≥xima pergunta
                if (currentQuestion <= totalQuestions) {
                    document.getElementById(`question-${currentQuestion}`).classList.remove('hidden');
                    updateProgress();
                    updateStepIndicator();
                    
                    // Atualizar texto do bot√£o pr√≥ximo se for a √∫ltima pergunta
                    if (currentQuestion === totalQuestions) {
                        nextBtn.textContent = 'Continuar';
                    }
                }
                
                // Habilitar/desabilitar bot√£o anterior
                prevBtn.disabled = currentQuestion === 1;
                
                // Desabilitar bot√£o pr√≥ximo at√© selecionar uma op√ß√£o
                nextBtn.disabled = true;
            }
            
            function goToPreviousQuestion() {
                // Esconder pergunta atual
                if (currentQuestion <= totalQuestions) {
                    document.getElementById(`question-${currentQuestion}`).classList.add('hidden');
                }
                
                // Retroceder
                currentQuestion--;
                
                // Mostrar pergunta anterior
                document.getElementById(`question-${currentQuestion}`).classList.remove('hidden');
                updateProgress();
                updateStepIndicator();
                
                // Atualizar texto do bot√£o pr√≥ximo
                nextBtn.textContent = currentQuestion === totalQuestions ? 'Continuar' : 'Pr√≥xima Pergunta';
                
                // Habilitar/desabilitar bot√£o anterior
                prevBtn.disabled = currentQuestion === 1;
                
                // Habilitar bot√£o pr√≥ximo (j√° temos uma resposta selecionada)
                nextBtn.disabled = false;
            }
            
            function showNameInput() {
                // Esconder √∫ltima pergunta
                document.getElementById(`question-${currentQuestion}`).classList.add('hidden');
                
                // Mostrar entrada de nome
                nameInputSection.classList.remove('hidden');
                
                // Atualizar estado
                currentQuestion = totalQuestions + 1;
                updateProgress();
                updateStepIndicator();
                
                // Atualizar bot√µes
                prevBtn.disabled = false;
                nextBtn.textContent = 'Criar Meu Jingle!';
                nextBtn.disabled = userNameInput.value.trim() === '';
                
                // Focar no campo de nome
                userNameInput.focus();
            }
            
            function hideNameInput() {
                // Esconder entrada de nome
                nameInputSection.classList.add('hidden');
                
                // Mostrar √∫ltima pergunta novamente
                document.getElementById(`question-${totalQuestions}`).classList.remove('hidden');
                
                // Atualizar estado
                currentQuestion = totalQuestions;
                updateProgress();
                updateStepIndicator();
                
                // Atualizar bot√µes
                prevBtn.disabled = currentQuestion === 1;
                nextBtn.textContent = 'Continuar';
                nextBtn.disabled = false;
            }
            
            function validateNameInput() {
                const name = userNameInput.value.trim();
                
                if (name === '') {
                    nameError.classList.remove('hidden');
                    return false;
                }
                
                nameError.classList.add('hidden');
                userName = name;
                return true;
            }
            
            // Atualizar barra de progresso
            function updateProgress() {
                const percentage = (currentQuestion / (totalQuestions + 1)) * 100;
                progressFill.style.width = `${percentage}%`;
                progressPercentage.textContent = `${Math.round(percentage)}%`;
            }
            
            // Atualizar indicador de etapas
            function updateStepIndicator() {
                document.querySelectorAll('.step').forEach(step => {
                    const stepNum = parseInt(step.getAttribute('data-step'));
                    step.classList.toggle('active', stepNum <= currentQuestion);
                });
            }
            
            // Evento para campo de nome
            userNameInput.addEventListener('input', function() {
                nextBtn.disabled = this.value.trim() === '';
            });
            
            // Iniciar gera√ß√£o de m√∫sica
            async function startMusicGeneration() {
                // Esconder quiz e mostrar loading
                quizCard.classList.add('hidden');
                loadingCard.classList.remove('hidden');
                
                try {
                    // Criar prompt baseado nas respostas
                    const prompt = createPromptFromAnswers();
                    const style = determineMusicStyle();
                    const title = `Jingle Engra√ßado para ${userName}`;
                    
                    // Dados para a API
                    const requestData = {
                        customMode: true,
                        instrumental: false, // Queremos letra (vocal)
                        model: "V4_5ALL", // Modelo recomendado na documenta√ß√£o
                        prompt: prompt,
                        style: style,
                        title: title,
                        vocalGender: determineVocalGender(),
                        styleWeight: 0.7,
                        weirdnessConstraint: 0.8, // Um pouco mais alto para mais criatividade
                        audioWeight: 0.7
                    };
                    
                    console.log('Enviando requisi√ß√£o para a API do Suno:', requestData);
                    
                    // Fazer requisi√ß√£o para a API do Suno
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${API_KEY}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestData)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Erro na API: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    
                    if (result.code !== 200) {
                        throw new Error(`API retornou erro: ${result.msg}`);
                    }
                    
                    // Salvar taskId para verifica√ß√£o posterior
                    generatedTaskId = result.data.taskId;
                    console.log('Task ID recebido:', generatedTaskId);
                    
                    // Iniciar verifica√ß√£o de status
                    checkMusicStatus(generatedTaskId);
                    
                } catch (error) {
                    console.error('Erro ao gerar m√∫sica:', error);
                    
                    // Em ambiente de demonstra√ß√£o, simular sucesso ap√≥s alguns segundos
                    simulateMusicGeneration();
                    
                    // Para produ√ß√£o real, voc√™ mostraria uma mensagem de erro
                    // showError(`Falha ao criar m√∫sica: ${error.message}`);
                }
            }
            
            // Verificar status da m√∫sica
            async function checkMusicStatus(taskId) {
                console.log('Verificando status da m√∫sica...');
                
                try {
                    // Na API real, voc√™ faria uma requisi√ß√£o GET para verificar o status
                    // const response = await fetch(`${API_STATUS_URL}${taskId}`, {
                    //     headers: {
                    //         'Authorization': `Bearer ${API_KEY}`
                    //     }
                    // });
                    
                    // Como esta √© uma demonstra√ß√£o, vamos simular o processo
                    setTimeout(() => {
                        // Simular URLs de √°udio geradas
                        generatedAudioUrl = `https://example.sunoapi.ai/stream/${taskId}.mp3`;
                        generatedDownloadUrl = `https://example.sunoapi.ai/download/${taskId}.mp3`;
                        
                        // Mostrar resultado
                        showResult();
                    }, 5000); // Simular 5 segundos de processamento
                    
                } catch (error) {
                    console.error('Erro ao verificar status:', error);
                    simulateMusicGeneration();
                }
            }
            
            // Simular gera√ß√£o de m√∫sica para demonstra√ß√£o
            function simulateMusicGeneration() {
                console.log('Simulando gera√ß√£o de m√∫sica para demonstra√ß√£o...');
                
                setTimeout(() => {
                    // URLs de exemplo para demonstra√ß√£o
                    generatedAudioUrl = 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3';
                    generatedDownloadUrl = 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3';
                    
                    // Mostrar resultado
                    showResult();
                }, 3000);
            }
            
            // Criar prompt baseado nas respostas
            function createPromptFromAnswers() {
                // Mapear respostas para caracter√≠sticas
                const energyMap = {
                    'explosiva': 'com energia explosiva e acelerada',
                    'calma': 'com uma vibe calma e relaxada',
                    'impulsiva': 'com altos e baixos emocionais',
                    'equilibrada': 'com equil√≠brio e modera√ß√£o'
                };
                
                const musicMap = {
                    'pop': 'no estilo pop alegre e cativante',
                    'rock': 'no estilo rock com atitude e energia',
                    'funk': 'no estilo funk dan√ßante e descontra√≠do',
                    'sertanejo': 'no estilo sertanejo emocional e tradicional'
                };
                
                const reactionMap = {
                    'improvisa': 'que improvisa em qualquer situa√ß√£o',
                    'planeja': 'que planeja tudo cuidadosamente',
                    'ri': 'que leva tudo na brincadeira',
                    'estressa': 'que fica um pouco estressado com imprevistos'
                };
                
                const animalMap = {
                    'leao': 'com a coragem de um le√£o',
                    'golfinho': 'com a alegria de um golfinho',
                    'coruja': 'com a sabedoria de uma coruja',
                    'macaco': 'com a energia de um macaco'
                };
                
                const partyMap = {
                    'dancarino': 'que adora dan√ßar no centro da pista',
                    'conversador': 'que prefere conversar nas laterais',
                    'observador': 'que observa tudo de um canto',
                    'animador': 'que anima a festa com brincadeiras'
                };
                
                const powerMap = {
                    'velocidade': 'que gostaria de ter super velocidade',
                    'leitura': 'que gostaria de ler mentes',
                    'invisibilidade': 'que gostaria de ser invis√≠vel',
                    'voar': 'que gostaria de voar como um super-her√≥i'
                };
                
                const humorMap = {
                    'sarcastico': 'com humor sarc√°stico e ir√¥nico',
                    'palhaco': 'com humor de palha√ßo e piadas bobas',
                    'absurdo': 'com humor absurdo e nonsense',
                    'timido': 'com humor t√≠mido e discreto'
                };
                
                const challengeMap = {
                    'coragem': 'que enfrenta desafios com coragem',
                    'estrategia': 'que enfrenta desafios com estrat√©gia',
                    'criatividade': 'que enfrenta desafios com criatividade',
                    'humor': 'que enfrenta desafios com bom humor'
                };
                
                // Construir prompt
                let prompt = `Crie uma m√∫sica engra√ßada e caricata sobre ${userName}, `;
                prompt += `${energyMap[userAnswers.question1]}, `;
                prompt += `${musicMap[userAnswers.question2]}, `;
                prompt += `${reactionMap[userAnswers.question3]}, `;
                prompt += `${animalMap[userAnswers.question4]}, `;
                prompt += `${partyMap[userAnswers.question5]}, `;
                prompt += `${powerMap[userAnswers.question6]}, `;
                prompt += `${humorMap[userAnswers.question7]}, `;
                prompt += `${challengeMap[userAnswers.question8]}. `;
                prompt += `A m√∫sica deve ser divertida, exagerada e incluir o nome ${userName} v√°rias vezes no refr√£o. `;
                prompt += `Inclua elementos c√¥micos e caricatos que representem essas caracter√≠sticas de forma exagerada. `;
                prompt += `A letra deve ser engra√ßada e memor√°vel, perfeita para um jingle pessoal.`;
                
                return prompt;
            }
            
            // Determinar estilo musical baseado nas respostas
            function determineMusicStyle() {
                const musicStyle = userAnswers.question2;
                const styleMap = {
                    'pop': 'Pop, Dance, Upbeat',
                    'rock': 'Rock, Electric Guitar, Energetic',
                    'funk': 'Funk, Groovy, Brazilian Funk',
                    'sertanejo': 'Sertanejo, Brazilian Country, Emotional'
                };
                
                // Adicionar elemento c√¥mico baseado no humor
                const humor = userAnswers.question7;
                let comicElement = '';
                
                if (humor === 'palhaco') {
                    comicElement = ', Comedic, Silly';
                } else if (humor === 'absurdo') {
                    comicElement = ', Nonsense, Absurd';
                } else if (humor === 'sarcastico') {
                    comicElement = ', Ironic, Witty';
                }
                
                return styleMap[musicStyle] + comicElement;
            }
            
            // Determinar g√™nero vocal baseado nas respostas
            function determineVocalGender() {
                // Esta √© uma simplifica√ß√£o - em uma aplica√ß√£o real, voc√™ perguntaria ao usu√°rio
                // ou usaria uma l√≥gica mais sofisticada
                const animal = userAnswers.question4;
                
                // Le√£o e macaco -> masculino; Golfinho e coruja -> pode ser qualquer um
                if (animal === 'leao' || animal === 'macaco') {
                    return 'm';
                } else {
                    // Alternar aleatoriamente para demonstra√ß√£o
                    return Math.random() > 0.5 ? 'm' : 'f';
                }
            }
            
            // Mostrar resultado com m√∫sica gerada
            function showResult() {
                loadingCard.classList.add('hidden');
                resultCard.classList.remove('hidden');
                
                // Atualizar t√≠tulo
                document.getElementById('generated-title').textContent = `Jingle Engra√ßado para ${userName}`;
                
                // Atualizar detalhes
                const style = determineMusicStyle().split(',')[0];
                document.getElementById('music-details').textContent = 
                    `Estilo: ${style} ‚Ä¢ Energia: ${getEnergyLevel()} ‚Ä¢ Dura√ß√£o: 2-3 minutos`;
                
                // Criar player de √°udio
                const musicPlayer = document.getElementById('music-player');
                musicPlayer.innerHTML = `
                    <audio controls autoplay style="width: 100%; border-radius: 8px;">
                        <source src="${generatedAudioUrl}" type="audio/mpeg">
                        Seu navegador n√£o suporta o elemento de √°udio.
                    </audio>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: var(--gray);">
                        Se o √°udio n√£o carregar automaticamente, <a href="${generatedAudioUrl}" target="_blank">clique aqui para ouvir</a>.
                    </p>
                `;
                
                // Configurar bot√£o de download
                downloadBtn.href = generatedDownloadUrl;
                downloadBtn.download = `jingle-${userName.toLowerCase().replace(/\s+/g, '-')}.mp3`;
                
                // Adicionar evento ao bot√£o de novo quiz
                newQuizBtn.addEventListener('click', resetQuiz);
            }
            
            // Obter n√≠vel de energia baseado nas respostas
            function getEnergyLevel() {
                const energy = userAnswers.question1;
                const energyLevels = {
                    'explosiva': 'Muito Alta',
                    'calma': 'Baixa',
                    'impulsiva': 'Vari√°vel',
                    'equilibrada': 'M√©dia'
                };
                return energyLevels[energy] || 'M√©dia';
            }
            
            // Mostrar erro
            function showError(message) {
                loadingCard.innerHTML = `
                    <div class="loading-container">
                        <div style="font-size: 3rem; color: #EF4444; margin-bottom: 20px;">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h2 class="question-text">Erro ao criar jingle</h2>
                        <p class="subtitle">${message}</p>
                        <div class="error-message">
                            <strong>Poss√≠veis causas:</strong> Problema na API, limite de cr√©ditos excedido ou prompt muito longo.
                        </div>
                        <button class="btn" id="retry-btn" style="margin-top: 30px;">Tentar Novamente</button>
                    </div>
                `;
                
                document.getElementById('retry-btn').addEventListener('click', resetQuiz);
            }
            
            // Reiniciar quiz
            function resetQuiz() {
                // Resetar estado
                currentQuestion = 1;
                userAnswers = {};
                userName = '';
                generatedTaskId = '';
                generatedAudioUrl = '';
                generatedDownloadUrl = '';
                
                // Resetar UI
                document.querySelectorAll('.question-container').forEach((q, idx) => {
                    if (idx === 0) {
                        q.classList.remove('hidden');
                    } else {
                        q.classList.add('hidden');
                    }
                });
                
                document.querySelectorAll('.option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                nameInputSection.classList.add('hidden');
                userNameInput.value = '';
                nameError.classList.add('hidden');
                
                // Atualizar bot√µes
                nextBtn.textContent = 'Pr√≥xima Pergunta';
                nextBtn.disabled = true;
                prevBtn.disabled = true;
                
                // Mostrar quiz novamente
                resultCard.classList.add('hidden');
                quizCard.classList.remove('hidden');
                updateProgress();
                updateStepIndicator();
            }
            
            // Inicializar
            updateProgress();
            updateStepIndicator();
            prevBtn.disabled = true;
            nextBtn.disabled = true;
        });
    </script>
</body>
</html>
